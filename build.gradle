buildscript {
    repositories {
    	jcenter()
        mavenCentral()
        maven { url 'https://plugins.gradle.org/m2/' }
    }
    dependencies {
        classpath 'com.blackducksoftware.integration:common-gradle-plugin:0.0.+'
        classpath("org.springframework.boot:spring-boot-gradle-plugin:1.5.9.RELEASE")
    }
}



apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'org.springframework.boot'
apply plugin: 'maven'
apply plugin: 'maven-publish'

version =  '0.1.0'

apply plugin: 'com.blackducksoftware.integration.solution'

final def versionFile = new File("${projectDir}/src/main/resources/version.txt")
versionFile.delete()
versionFile << version

//jar {
//    baseName = 'hub-imageinspector-ws'
//}

publishing {
    publications {
        mavenJava(MavenPublication) {
            def artifactName = "${buildDir}/libs/${project.name}-${version}.jar"
            artifact (artifactName)
        }
    }
}

artifactory {
    publish {
        defaults { publications ('mavenJava') }
    }
}

repositories {
    mavenLocal()
    jcenter()
    mavenCentral()
}

sourceCompatibility = 1.8
targetCompatibility = 1.8

dependencies {
	// cd ../hub-docker-inspector/build
	// ./gradlew publishToMavenLocal
	// mvn install:install-file -Dfile=build/libs/hub-docker-inspector-4.3.2-SNAPSHOT.jar -DgroupId=com.blackducksoftware.integration -DartifactId=image-inspector -Dversion=4.3.2-SNAPSHOT -Dpackaging=jar -DgeneratePom=true
	//compile("com.blackducksoftware.integration:image-inspector:4.3.2-SNAPSHOT")
	//compile("com.blackducksoftware.integration:hub-docker-inspector:4.3.2-SNAPSHOT")

    /////////////
    // transitive dependencies pulled in by image inspector lib
    //compile 'com.github.docker-java:docker-java:3.0.12'
    //compile 'org.apache.commons:commons-lang3:3.5'
    //compile 'commons-io:commons-io:2.5'
    //compile 'org.apache.commons:commons-collections4:4.1'
    //compile 'org.apache.commons:commons-exec:1.3'
    //compile 'org.apache.commons:commons-compress:1.12'
    ///////////

    ////////////
    // Pretty sure this is totally stupid
    // transitive dependencies pulled in by image inspector lib
    //testCompile("com.blackducksoftware.integration:image-inspector:4.3.2-SNAPSHOT")
    //testCompile 'org.apache.commons:commons-lang3:3.5'
    //testCompile 'commons-io:commons-io:2.5'
    //testCompile 'org.apache.commons:commons-collections4:4.1'
    //testCompile 'org.apache.commons:commons-exec:1.3'
    //testCompile 'org.apache.commons:commons-compress:1.12'
    ///////////
    
    //compile 'com.blackducksoftware.integration:hub-common:18.0.0'
    compile 'com.blackducksoftware.integration:hub-imageinspector-lib:0.1.0-SNAPSHOT'
    compile("org.springframework.boot:spring-boot-starter-web")
    testCompile('org.springframework.boot:spring-boot-starter-test')
}

